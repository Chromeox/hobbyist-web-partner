# TestFlight Automation Configuration
# This file contains all configuration settings for the automated TestFlight submission system

# Project Configuration
project:
  name: "HobbyistSwiftUI"
  bundle_id: "com.hobbyist.bookingapp"
  scheme: "HobbyistSwiftUI"
  xcodeproj: "HobbyistSwiftUI.xcodeproj"
  workspace: ""  # Leave empty if using xcodeproj
  
# Build Configuration
build:
  configuration: "Release"
  export_method: "app-store"
  include_bitcode: false
  include_symbols: true
  clean_build: true
  increment_build_number: true
  
# Version Management
version:
  auto_increment: true
  semantic_versioning: true
  version_source: "xcode"  # Options: xcode, git, manual
  
# TestFlight Configuration
testflight:
  skip_waiting_for_build_processing: true
  skip_submission: false
  distribute_external: false
  notify_external_testers: false
  beta_app_description: "HobbyistSwiftUI alpha version for testing"
  
# Testing Groups Configuration
testing_groups:
  internal:
    - name: "Alpha Testers"
      description: "Internal team alpha testing group"
      auto_add_builds: true
    - name: "Internal Team"
      description: "Core development team"
      auto_add_builds: true
      
  external:
    - name: "Beta Testers"
      description: "External beta testing group"
      auto_add_builds: false
      requires_beta_review: true
    - name: "Stakeholders"
      description: "Project stakeholders and reviewers"
      auto_add_builds: false
      requires_beta_review: false

# Beta Review Configuration
beta_review:
  auto_submit: false
  demo_account_required: true
  demo_account:
    username: ""  # Set via environment variable DEMO_ACCOUNT_USERNAME
    password: ""  # Set via environment variable DEMO_ACCOUNT_PASSWORD
  review_notes: ""
  contact_email: ""  # Set via environment variable BETA_FEEDBACK_EMAIL
  
# Notification Configuration
notifications:
  enabled: true
  channels:
    slack:
      enabled: true
      webhook_url: ""  # Set via environment variable SLACK_WEBHOOK_URL
      channel: "#ios-releases"
      mention_users: []
      
    email:
      enabled: false
      smtp_server: ""
      smtp_port: 587
      username: ""
      password: ""
      from_email: ""
      to_emails: []
      
    webhook:
      enabled: false
      url: ""
      headers: {}
      
# Monitoring Configuration
monitoring:
  crash_rate_threshold: 5.0  # Percentage
  rating_threshold: 4.0      # Minimum rating
  session_duration_threshold: 30  # Seconds
  retention_threshold: 70.0  # Percentage
  
  alerts:
    enabled: true
    crash_rate_spike: true
    low_rating: true
    processing_timeout: true
    upload_failure: true
    
# Quality Gates
quality_gates:
  enabled: true
  crash_rate_max: 3.0
  rating_min: 4.2
  performance_regression: true
  security_scan: false
  
  pre_submission:
    run_tests: true
    code_coverage_min: 80.0
    static_analysis: true
    dependency_check: true
    
# Retry Configuration
retry:
  max_attempts: 3
  backoff_strategy: "exponential"  # Options: linear, exponential
  initial_delay: 30  # Seconds
  max_delay: 300     # Seconds
  
# Logging Configuration
logging:
  level: "info"  # Options: debug, info, warning, error
  retention_days: 30
  max_file_size: "10MB"
  format: "json"  # Options: json, text
  
  destinations:
    file: true
    console: true
    remote: false
    
# Security Configuration
security:
  keychain_access_group: ""
  certificate_validation: true
  provisioning_profile_validation: true
  code_signing_validation: true
  
# API Configuration
api:
  app_store_connect:
    timeout: 300  # Seconds
    retry_count: 3
    rate_limit_delay: 1  # Seconds between requests
    
  spaceship:
    timeout: 180
    retry_count: 2
    
# File Paths
paths:
  build_output: "./build"
  logs: "./testflight-automation/logs"
  scripts: "./testflight-automation/scripts"
  templates: "./testflight-automation/templates"
  certificates: "./certificates"
  
# Environment-specific Overrides
environments:
  development:
    build:
      configuration: "Debug"
    testflight:
      skip_submission: true
      
  staging:
    notifications:
      slack:
        channel: "#ios-staging"
        
  production:
    quality_gates:
      crash_rate_max: 1.0
      rating_min: 4.5
    notifications:
      enabled: true
      slack:
        channel: "#ios-releases"
        mention_users: ["@ios-team"]