# Scheme name
scheme("HobbyistSwiftUI")

# Project file path
project("HobbyistSwiftUI.xcodeproj")

# Export method
export_method("app-store")

# Output directory for the IPA
output_directory("./build")

# Output name for the IPA
output_name("HobbyistSwiftUI")

# Clean project before building
clean(true)

# Include symbols in the build
include_symbols(true)

# Disable Bitcode (not required for iOS 16+)
include_bitcode(false)

# Build configuration
configuration("Release")

# iOS deployment target
deployment_target("16.0")

# Build for simulator (set to false for distribution)
build_for_simulator(false)

# Suppress Xcode output unless there's an error
suppress_xcode_output(false)

# Disable automatic code signing (use Fastlane Match instead)
disable_automatic_code_signing(false)

# Export options
export_options({
  method: "app-store",
  provisioningProfiles: {
    "com.hobbyist.app" => "match AppStore com.hobbyist.app"
  },
  signingStyle: "automatic",
  teamID: ENV["DEVELOPER_TEAM_ID"],
  compileBitcode: false,
  uploadBitcode: false,
  uploadSymbols: true,
  stripSwiftSymbols: true
})

# For more information about the Gymfile, see:
#     https://docs.fastlane.tools/actions/gym/#parameters